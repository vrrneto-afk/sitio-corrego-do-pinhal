<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Vacas | Sítio Córrego do Pinhal</title>

  <style>
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      background: #f5f5f5;
    }

    header {
      text-align: center;
      padding: 20px 10px;
      background: #fff;
      border-bottom: 1px solid #ddd;
    }

    header h1 {
      margin: 0;
      font-size: 26px;
    }

    nav {
      background: #7a1f2b;
      display: flex;
      justify-content: center;
      gap: 8px;
      padding: 10px;
    }

    nav a {
      color: #fff;
      text-decoration: none;
      padding: 8px 14px;
      border-radius: 4px;
    }

    nav a:hover {
      background: #5f1821;
    }

    main {
      padding: 20px;
    }

    h2 {
      margin-top: 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: left;
      cursor: pointer;
    }

    th {
      background: #eee;
    }

    tr.selected {
      background: #f2dede;
    }

    .admin-bar {
      margin-bottom: 10px;
      display: none;
      gap: 10px;
    }

    .admin-bar button {
      background: #7a1f2b;
      color: #fff;
      border: none;
      padding: 8px 12px;
      border-radius: 4px;
      cursor: pointer;
    }

    .admin-bar button:hover {
      background: #5f1821;
    }

    .gear {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #7a1f2b;
      color: #fff;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      cursor: pointer;
    }
  </style>
</head>

<body>

<header>
  <h1>Sítio Córrego do Pinhal</h1>
</header>

<nav>
  <a href="index.html">Início</a>
  <a href="vacas.html">Vacas</a>
  <a href="historico.html">Histórico</a>
  <a href="bezerros.html">Bezerros</a>
  <a href="vacinas.html">Vacinas</a>
  <a href="animais.html">Animais</a>
</nav>

<main>

  <h2>Vacas</h2>

  <div class="admin-bar admin-only">
    <button onclick="adicionarVaca()">Adicionar vaca</button>
    <button onclick="editarVaca()">Editar selecionada</button>
    <button onclick="excluirVaca()">Excluir selecionada</button>
  </div>

  <table id="tabela">
    <thead>
      <tr>
        <th data-col="nome">Nome</th>
        <th data-col="raca">Raça</th>
        <th data-col="touro">Touro</th>
        <th data-col="panhou_cria_em">Panhou cria</th>
        <th data-col="cria_prevista_em">Cria prevista</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

</main>

<div class="gear" onclick="toggleAdmin()">⚙️</div>

<script>
/* =====================
   LOGIN ADM
===================== */
function toggleAdmin() {
  const isAdmin = localStorage.getItem("isAdmin") === "true";

  if (isAdmin) {
    localStorage.removeItem("isAdmin");
    alert("Saiu do modo administrador");
    location.reload();
    return;
  }

  const senha = prompt("Digite a senha do administrador:");
  if (senha === "1234") {
    localStorage.setItem("isAdmin", "true");
    alert("Administrador ativado");
    location.reload();
  } else {
    alert("Senha incorreta");
  }
}

document.addEventListener("DOMContentLoaded", () => {
  if (localStorage.getItem("isAdmin") === "true") {
    document.querySelectorAll(".admin-only").forEach(el => {
      el.style.display = "flex";
    });
  }
});

/* =====================
   DADOS (exemplo)
===================== */
let dados = [
  { nome: "BARONESA", raca: "GIROLANDO", touro: "BANGUELA", panhou_cria_em: "22/02/2025", cria_prevista_em: "22/11/2025" },
  { nome: "BARQUINHA", raca: "JERSOLANDO", touro: "BANGUELA", panhou_cria_em: "12/03/2025", cria_prevista_em: "12/12/2025" },
  { nome: "BETINA", raca: "HOLANDESA", touro: "ZÉ MALAIA", panhou_cria_em: "26/08/2025", cria_prevista_em: "26/05/2026" },
  { nome: "FAXINA", raca: "GIROLANDO", touro: "BANGUELA", panhou_cria_em: "15/05/2024", cria_prevista_em: "15/02/2025" }
];

/* =====================
   RENDER
===================== */
let selecionada = null;

function renderTabela() {
  const tbody = document.querySelector("tbody");
  tbody.innerHTML = "";

  dados.forEach((vaca, index) => {
    const tr = document.createElement("tr");
    if (selecionada === index) tr.classList.add("selected");

    tr.innerHTML = `
      <td>${vaca.nome}</td>
      <td>${vaca.raca}</td>
      <td>${vaca.touro}</td>
      <td>${vaca.panhou_cria_em || ""}</td>
      <td>${vaca.cria_prevista_em || ""}</td>
    `;

    tr.onclick = () => {
      selecionada = index;
      renderTabela();
    };

    tbody.appendChild(tr);
  });
}

renderTabela();

/* =====================
   ORDENAÇÃO CORRETA
===================== */
function parseDataBR(data) {
  if (!data) return new Date(0);
  const [d, m, a] = data.split("/");
  return new Date(`${a}-${m}-${d}`);
}

let ordem = {};

document.querySelectorAll("th").forEach(th => {
  th.onclick = () => {
    const col = th.dataset.col;
    ordem[col] = !ordem[col];

    dados.sort((a, b) => {
      let x = a[col];
      let y = b[col];

      if (col.includes("em")) {
        x = parseDataBR(x);
        y = parseDataBR(y);
      } else {
        x = (x || "").toUpperCase();
        y = (y || "").toUpperCase();
      }

      if (x < y) return ordem[col] ? -1 : 1;
      if (x > y) return ordem[col] ? 1 : -1;
      return 0;
    });

    renderTabela();
  };
});

/* =====================
   AÇÕES ADM (base pronta)
===================== */
function adicionarVaca() {
  alert("Função adicionar será implementada em seguida");
}

function editarVaca() {
  if (selecionada === null) return alert("Selecione uma vaca");
  alert("Função editar será implementada em seguida");
}

function excluirVaca() {
  if (selecionada === null) return alert("Selecione uma vaca");
  alert("Função excluir será implementada em seguida");
}
</script>

</body>
</html>
