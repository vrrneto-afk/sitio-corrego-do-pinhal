<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ConfiguraÃ§Ãµes</title>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<link rel="stylesheet" href="menu-adm.css">
<link rel="stylesheet" href="config.css">
</head>

<body>

<div id="app" class="hidden">

  <!-- HEADER PADRÃƒO -->
  <header>âš™ï¸ ConfiguraÃ§Ãµes</header>

  <!-- MENU ADM -->
  <div id="menu-adm"></div>

  <!-- CONTEÃšDO -->
  <div class="container">

    <!-- TELA INICIAL (CARDS) -->
    <div id="config-home">

      <h2>ConfiguraÃ§Ã£o do Sistema</h2>

      <div class="cards-grid">

        <button class="config-card" onclick="abrirConfig('geral')">
          ğŸ§­
          <span>Geral</span>
        </button>

        <button class="config-card" onclick="abrirConfig('bezerros')">
          ğŸ®
          <span>Bezerros / Crias</span>
        </button>

        <button class="config-card" onclick="abrirConfig('vacinas')">
          ğŸ’‰
          <span>Vacinas</span>
        </button>

        <button class="config-card" onclick="abrirConfig('despesas')">
          ğŸ’°
          <span>Despesas</span>
        </button>

        <button class="config-card" onclick="abrirConfig('vacas')">
          ğŸ„
          <span>Vacas</span>
        </button>

        <button class="config-card" onclick="abrirConfig('leite')">
          ğŸ¥›
          <span>Leite</span>
        </button>

        <button class="config-card" onclick="abrirConfig('especies')">
          ğŸ§¬
          <span>EspÃ©cies</span>
        </button>

        <button class="config-card" onclick="abrirConfig('farmacia')">
          ğŸ’Š
          <span>FarmÃ¡cia</span>
        </button>

        <button class="config-card" onclick="abrirConfig('clima')">
          ğŸŒ¦ï¸
          <span>Clima</span>
        </button>

        <button class="config-card" onclick="abrirConfig('menu')">
          ğŸ“‹
          <span>Menu</span>
        </button>

      </div>
    </div>

    <!-- ÃREA DINÃ‚MICA DAS CONFIGURAÃ‡Ã•ES -->
    <div id="config-detalhe" class="hidden">

      <div class="config-topo">
        <button class="voltar" onclick="voltarConfig()">â¬… Voltar</button>
        <h2 id="config-titulo"></h2>
      </div>

      <!-- AQUI ENTRA O HTML DA SESSÃƒO -->
      <div id="config-conteudo"></div>

    </div>

  </div>
</div>

<script>
/* MENU ADM */
fetch("menu-adm.html")
  .then(r => r.text())
  .then(html => {
    document.getElementById("menu-adm").innerHTML = html;
    document.querySelectorAll(".menu-link").forEach(a => {
      if (a.getAttribute("href") === "config.html") {
        a.classList.add("ativo");
      }
    });
  });
</script>

<!-- ğŸ” AUTH + LIBERAÃ‡ÃƒO DA TELA (CORREÃ‡ÃƒO DA TELA BRANCA) -->
<script>
firebase.initializeApp({
  apiKey:"AIzaSyCW-CuFDrOLO-dteckl_GrPTocmyS-IrzY",
  authDomain:"sitio-corrego-do-pinhal.firebaseapp.com",
  projectId:"sitio-corrego-do-pinhal"
});

const auth = firebase.auth();

auth.onAuthStateChanged(user=>{
  if(user){
    document.body.style.display = "block";
    document.getElementById("app").classList.remove("hidden");
  }
});
</script>

<!-- AUTH CENTRAL (mantido) -->
<script src="auth-adm.js"></script>

<script>
/* CONTROLE VISUAL */
function abrirConfig(tipo){
  document.getElementById("config-home").classList.add("hidden");
  document.getElementById("config-detalhe").classList.remove("hidden");

  const titulos = {
    geral:"ConfiguraÃ§Ã£o â€“ Geral",
    bezerros:"ConfiguraÃ§Ã£o â€“ Bezerros / Crias",
    vacinas:"ConfiguraÃ§Ã£o â€“ Vacinas",
    despesas:"ConfiguraÃ§Ã£o â€“ Despesas",
    vacas:"ConfiguraÃ§Ã£o â€“ Vacas",
    leite:"ConfiguraÃ§Ã£o â€“ Leite",
    especies:"ConfiguraÃ§Ã£o â€“ EspÃ©cies",
    farmacia:"ConfiguraÃ§Ã£o â€“ FarmÃ¡cia",
    clima:"ConfiguraÃ§Ã£o â€“ Clima",
    menu:"ConfiguraÃ§Ã£o â€“ Menu"
  };

  document.getElementById("config-titulo").innerText =
    titulos[tipo] || "ConfiguraÃ§Ã£o";

  document.getElementById("config-conteudo").innerHTML = "";

  const script = document.createElement("script");
  script.src = `config/config-${tipo}.js`;
  script.defer = true;
  document.body.appendChild(script);
}

function voltarConfig(){
  document.getElementById("config-detalhe").classList.add("hidden");
  document.getElementById("config-home").classList.remove("hidden");
  document.getElementById("config-conteudo").innerHTML = "";
}
</script>

</body>
</html>
